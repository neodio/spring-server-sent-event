<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title th:text="${meetingRoom.name}">회의실 상세</title>
    <link rel="icon" type="image/svg+xml" th:href="@{/favicon.svg}">
    <link rel="stylesheet" th:href="@{/css/meeting-room-detail.css}">
</head>
<body>
<div class="container">
    <button class="back-button" onclick="location.href='/'">
        ← 뒤로
    </button>

    <div class="header">
        <div class="room-info">
            <div class="room-icon">정우<br>컴퍼니</div>
            <div class="room-text">
                <div class="campus-name">선릉 캠퍼스</div>
                <div class="room-name" th:text="${meetingRoom.name}">회의실</div>
            </div>
        </div>

        <div class="progress-bar">
            <div class="progress-fill" id="progressBar">0 / 4</div>
        </div>
    </div>

    <div class="checklist-section">
        <div class="section-header">
            <span class="section-title" th:text="${meetingRoom.name}">회의실</span>
            <button class="all-button" onclick="toggleAll()">
                전체 체크
            </button>
        </div>

        <div class="checklist-item" onclick="toggleCheckbox('airConditionerOff')">
            <div class="checkbox-wrapper">
                <div class="checkbox" id="checkbox-airConditionerOff"
                     th:classappend="${meetingRoom.airConditionerOff} ? 'checked' : ''"></div>
            </div>
            <span class="item-label">에어컨 끄기</span>
            <span class="status-badge" id="status-airConditionerOff"
                  th:classappend="${meetingRoom.airConditionerOff} ? 'completed' : 'pending'"
                  th:text="${meetingRoom.airConditionerOff} ? '완료' : '대기'">대기</span>
        </div>

        <div class="checklist-item" onclick="toggleCheckbox('tvOff')">
            <div class="checkbox-wrapper">
                <div class="checkbox" id="checkbox-tvOff"
                     th:classappend="${meetingRoom.tvOff} ? 'checked' : ''"></div>
            </div>
            <span class="item-label">TV 끄기</span>
            <span class="status-badge" id="status-tvOff"
                  th:classappend="${meetingRoom.tvOff} ? 'completed' : 'pending'"
                  th:text="${meetingRoom.tvOff} ? '완료' : '대기'">대기</span>
        </div>

        <div class="checklist-item" onclick="toggleCheckbox('lightOff')">
            <div class="checkbox-wrapper">
                <div class="checkbox" id="checkbox-lightOff"
                     th:classappend="${meetingRoom.lightOff} ? 'checked' : ''"></div>
            </div>
            <span class="item-label">불 끄기</span>
            <span class="status-badge" id="status-lightOff"
                  th:classappend="${meetingRoom.lightOff} ? 'completed' : 'pending'"
                  th:text="${meetingRoom.lightOff} ? '완료' : '대기'">대기</span>
        </div>

        <div class="checklist-item" onclick="toggleCheckbox('trashCleaned')">
            <div class="checkbox-wrapper">
                <div class="checkbox" id="checkbox-trashCleaned"
                     th:classappend="${meetingRoom.trashCleaned} ? 'checked' : ''"></div>
            </div>
            <span class="item-label">쓰레기 정리</span>
            <span class="status-badge" id="status-trashCleaned"
                  th:classappend="${meetingRoom.trashCleaned} ? 'completed' : 'pending'"
                  th:text="${meetingRoom.trashCleaned} ? '완료' : '대기'">대기</span>
        </div>
    </div>
</div>

<!-- Thymeleaf로 초기 데이터 주입 (전역 변수로 선언) -->
<script th:inline="javascript">
    // 서버에서 주입된 초기 데이터를 전역 변수로 선언
    var meetingRoomId = /*[[${meetingRoom.id}]]*/ 1;
    var currentState = {
        airConditionerOff: /*[[${meetingRoom.airConditionerOff}]]*/ false,
        tvOff: /*[[${meetingRoom.tvOff}]]*/ false,
        lightOff: /*[[${meetingRoom.lightOff}]]*/ false,
        trashCleaned: /*[[${meetingRoom.trashCleaned}]]*/ false
    };
    
    console.log('📋 Data injected from server:');
    console.log('   meetingRoomId:', meetingRoomId);
    console.log('   currentState:', currentState);
</script>

<!-- 외부 JavaScript 파일 -->
<script th:src="@{/js/meeting-room-detail.js}"></script>
</body>
</html>
